version: '3'

services:
    api:
        # Build dockerfile
        build: .
        # Restart container in case of crashes etc
        restart: always
        networks:
            - database
        # Mount uploads to volume,
        # so they wont get lost over deployments
        # Change uploads path to wherever
        # you store uploads in your app
        # Also ensure NodeJS has write access to there
        # (by default Node will have it)
        volumes:
            - uploads:/home/node/app/uploads

volumes:
    uploads:
        name: servermonitoring_uploads

networks:
    database:
        external:
            name: public_database_postgres
